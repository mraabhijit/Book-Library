{
    "routing": {
        "direct_exchange": "book.events",
        "dead_letter_exchange": "book.dlx",
        "keys": {
            "created": "book.created",
            "borrowed": "book.borrowed",
            "returned": "book.returned"
        },
        "queues": {
            "created": "q.book.created",
            "borrowed": "q.book.borrowed",
            "returned": "q.book.returned",
            "created_dlq": "q.book.created.dlq"
        }
    },
    "exchanges": [
        {
            "name": "book.events", 
            "type": "direct",
            "durable": true,
            "auto-delete": false
        },
        {
            "name": "book.dlx",
            "type": "direct",
            "durable": true,
            "auto-delete": false
        }
    ],
    "queues": [
        {
            "name": "q.book.created",
            "durable": true,
            "arguments": {
                "x-dead-letter-exchange": "book.dlx"
            }
        },
        {
            "name": "q.book.borrowed",
            "durable": true,
            "arguments": {}
        },
        {
            "name": "q.book.returned",
            "durable": true,
            "arguments": {}
        },
        {
            "name": "q.book.created.dlq",
            "durable": true,
            "arguments": {}
        }
    ],
    "bindings": [
        {
            "source": "book.events",
            "destination": "q.book.created",
            "routing_key": "book.created",
            "destination_type": "queue"
        },
        {
            "source": "book.events",
            "destination": "q.book.borrowed",
            "routing_key": "book.borrowed",
            "destination_type": "queue"
        },
        {
            "source": "book.events",
            "destination": "q.book.returned",
            "routing_key": "book.returned",
            "destination_type": "queue"
        },
        {
            "source": "book.dlx",
            "destination": "q.book.created.dlq",
            "routing_key": "book.created",
            "destination_type": "queue"
        }
    ]
}